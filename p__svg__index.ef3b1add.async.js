(self["webpackChunk"]=self["webpackChunk"]||[]).push([[7614],{98532:function(){},63625:function(e){e.exports={flex:"flex___18rEB","json-viewer":"json-viewer___67rUi"}},61847:function(e){e.exports={flex:"flex___2QKqS",ocr:"ocr___2MIuv","result-box-collpase":"result-box-collpase___kbmmV","result-box":"result-box___3Msl3","result-list":"result-list___2Y4Jq","ocr-box":"ocr-box___1P_2r","ocr-content":"ocr-content___uezG9",py:"py___1x9RA","py-checked":"py-checked___20k41"}},91967:function(e,t,o){"use strict";o.d(t,{JO:function(){return s},he:function(){return h},gb:function(){return i.Z}});var n=o(45976),c=o(85893),r=(0,n.Z)({scriptUrl:"//at.alicdn.com/t/font_2677882_tzcg0p99ksf.js"}),a=e=>{var t={};return e.size&&(t.fontSize=e.size),e.color&&(t.color=e.color),(0,c.jsx)(r,{type:"icon-".concat(e.type),style:t})},s=a,i=o(25744),l=o(94184),u=o.n(l),p=o(63625),d=o.n(p),g=e=>{var t=e.json,o=e.text,n=u()(d()["json-viewer"]);return o?(0,c.jsx)("pre",{className:n,children:o}):t?(0,c.jsx)("pre",{className:n,children:JSON.stringify(t,null,2)}):(console.warn("[ JSON Viewer ] == 'json' shouldn't be null, expected Object or Array"),null)},h=g,f=o(32101),v=o(45697),x=o.n(v),m=o(98532),y=o.n(m),_=()=>{},b=e=>{e.name;var t=e.key,o=e.isDragging,n=e.connectDragSource,r=(e.element,o?.4:1),a=u()(y().tag);return n((0,c.jsx)("div",{className:a,style:{opacity:r},children:e.children},t))},j=e=>{var t="box",o={beginDrag:e.begin,endDrag:e.end||_,canDrag:e.canDrag||_,isDragging:e.isDragging||_},n=(e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()});return(0,f.E)(t,o,n)(b)};j.prototype={begin:x().func.isRequired,end:x().func,canDrag:x().func,isDragging:x().func,element:x().element};var w=o(69684),S=e=>{e.canDrop;var t=e.isOver,o=(e.allowedDropEffect,e.connectDropTarget),n=e.element;console.log("isOVer == ",t);var r=u()({[y()["drag-to"]]:t});return o((0,c.jsx)("div",{className:r,children:n}))},k=e=>{var t="box",o={drop:e.drop,hover:e.hover,canDrop:e.canDrop},n=(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()});return(0,w.G)(t,o,n)((0,c.jsx)(S,{element:e.element}))};k.prototype={drop:x().func.isRequired,hover:x().func,canDrag:x().func}},92059:function(e,t,o){"use strict";o.r(t);o(49111);var n=o(19650),c=(o(57663),o(60404)),r=o(3182),a=o(8870),s=o(57337),i=o(94043),l=o.n(i),u=o(29323),p=o(74806),d=o(61847),g=o.n(d),h=o(67294),f=o(91967),v=o(95909),x=o.n(v),m=(o(96486),o(44586)),y=o(71415),_=o.n(y),b=o(85893),j=(new(_()),.3),w=(0,u.Pi)((e=>{var t=(0,h.useState)({}),o=(0,s.Z)(t,2),i=o[0],u=o[1],p=(0,h.useState)(void 0),d=(0,s.Z)(p,2),v=d[0],y=d[1],_=(0,h.useState)(!1),w=(0,s.Z)(_,2),S=w[0],k=w[1],D=(0,h.useState)(!1),Z=(0,s.Z)(D,2),N=Z[0],C=Z[1],O=(0,h.useState)(null),Y=(0,s.Z)(O,2),R=(Y[0],Y[1]),X=(0,h.useState)([]),M=(0,s.Z)(X,2),T=M[0],z=M[1],E=(0,h.useState)({}),J=(0,s.Z)(E,2),P=J[0],U=J[1],q=(0,h.useState)(!1),L=(0,s.Z)(q,2),A=L[0],B=L[1],K=(0,h.useState)(1),V=(0,s.Z)(K,2),G=V[0],H=V[1],I=(0,h.useState)(),Q=(0,s.Z)(I,2),W=Q[0],F=Q[1],$=(0,h.useRef)(),ee=(0,h.useRef)(),te=((0,h.useRef)(),(0,h.useRef)());function oe(){var e=$.current.getBoundingClientRect(),t=$.current.getClientRects();console.log("bound == ",e),console.log("rect == ",t),R(e),u({width:e.width,height:e.height}),ce(e)}function ne(){T.map((e=>{e.checked=!N})),C(!N),z(T)}function ce(e){var t=P.rotated_image_width/e.width;console.log("rate == ",t);var o=[];P.lines.map((e=>{o.push({text:e.text,polygons:e.position})})),console.log("data before == ",o);var n=[];o.map((e=>{var o=[];e.polygons.map((e=>{o.push(e/t)}));var c=(0,a.Z)({},e);c.id=(0,m.Z)(),c.checked=!1,c.text=e.text,c.polygons=e.polygons,c.polygonsScale=[...o],c.polygonsText="".concat(o[0]," ").concat(o[1],", ").concat(o[2]," ").concat(o[3],", ").concat(o[4]," ").concat(o[5],", ").concat(o[6]," ").concat(o[7]),n.push(c)})),console.log("data after == ",n),z(n)}function re(e){return ae.apply(this,arguments)}function ae(){return ae=(0,r.Z)(l().mark((function e(t){var o,n,c,r,a,s;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.target.files[0],k(!0),e.next=4,x()({fileData:t.target.files[0]});case 4:for(o=e.sent,k(!1),console.log("ocr res == ",o),U(null===o||void 0===o?void 0:o.result),n=[...t.target.files],c=0;c<n.length;c++)r=n[c],a=new Blob([r],{type:r.type}),s=URL.createObjectURL(a),y(s);case 10:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function se(e){var t=[...T],o=t.find((t=>t.id===e.id));o.checked=!o.checked,z([...t])}function ie(e){if(!~navigator.userAgent.toLowerCase().indexOf("iphone"))if(console.log(e.deltaY>0?"\u5411\u4e0b":"\u5411\u4e0a"),e.deltaY>0){var t=G+j/10;console.log("\u653e\u5927 == ",t),H(t)}else{var o=G-j/10;console.log("\u7f29\u5c0f == ",o),o<0&&(o=0),H(o)}}(0,h.useEffect)((()=>{H(1)}),[v]);var le=(0,h.useState)(!1),ue=(0,s.Z)(le,2),pe=ue[0],de=ue[1],ge=(0,h.useState)(void 0),he=(0,s.Z)(ge,2),fe=he[0],ve=(he[1],(0,h.useState)([0,0])),xe=(0,s.Z)(ve,2),me=xe[0],ye=xe[1];function _e(e){console.log(me),de(!0)}function be(e){if(pe&&fe){console.log(e.clientX,e.pageX);var t=e.clientX-fe[0],o=e.clientY-fe[1];ye([t,o])}}function je(){de(!1)}console.log("data render == ",T,null===T||void 0===T?void 0:T.filter((e=>e.checked)));var we=(0,h.useState)(!1),Se=(0,s.Z)(we,2),ke=Se[0],De=Se[1];function Ze(e){var t;if(console.log("touch fingures == ",null===e||void 0===e||null===(t=e.touches)||void 0===t?void 0:t.length),2===e.touches.length){De(!0);var o=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY);F(o),console.log("start dis == ",o)}}function Ne(e){if(2===e.touches.length&&ke){var t=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY);if(void 0!==W){var o=t>W;if(o){var n=G+j/10;console.log("\u53cc\u6307\u653e\u5927 == ",n),H(n)}else{var c=G-j/10;console.log("\u53cc\u6307\u7f29\u5c0f == ",c),c<0&&(c=0),H(c)}F(t)}}}function Ce(e){if(2===e.touches.length){var t=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY);console.log("end dis == ",t)}De(!1)}return(0,b.jsxs)(n.Z,{direction:"vertical",style:{width:"100%"},children:[S?(0,b.jsx)(f.gb,{tip:"\u4e0a\u4f20\u8bc6\u522b\u4e2d..."}):null,(0,b.jsxs)("div",{className:g().ocr,children:[A?(0,b.jsx)("div",{className:g()["result-box-collpase"],onClick:()=>{B(!1)}}):(0,b.jsxs)("div",{className:g()["result-box"],children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(c.Z,{type:"primary",onClick:ne,children:"\u5168\u9009"}),(0,b.jsx)(c.Z,{type:"primary",onClick:()=>B(!0),children:"\u6536\u8d77"}),v?(0,b.jsx)("input",{type:"file",multiple:"multiple",accept:"image/jpeg,image/jpg,image/png,image/gif",ref:ee,onChange:re}):null]}),(0,b.jsx)("div",{className:g()["result-list"],children:null===T||void 0===T?void 0:T.filter((e=>e.checked)).map((e=>(0,b.jsx)("div",{children:e.text},e.id)))})]}),(0,b.jsx)("div",{className:g()["ocr-box"],children:(0,b.jsxs)("div",{className:g()["ocr-content"],onWheel:ie,onMouseDown:_e,onMouseMove:be,onMouseUp:je,onTouchStart:Ze,onTouchMove:Ne,onTouchEnd:Ce,children:[v?(0,b.jsx)("img",{src:v,ref:$,onLoad:oe,style:{transform:"scale(".concat(G,")  translateX(").concat(me[0],"px) translateY(").concat(me[1],"px)"),transition:"all cubic-bezier(0.5, 0.5, 0.5, 0.5) 0s"}}):(0,b.jsx)("input",{type:"file",multiple:"multiple",accept:"image/jpeg,image/jpg,image/png,image/gif",ref:ee,onChange:re}),(0,b.jsx)("svg",{ref:te,style:(0,a.Z)((0,a.Z)({},i),{},{transform:"scale(".concat(G,") translateX(").concat(me[0],"px) translateY(").concat(me[1],"px)"),transition:"all cubic-bezier(0.5, 0.5, 0.5, 0.5) 0s"}),children:null===T||void 0===T?void 0:T.map((e=>(0,b.jsx)("polygon",{"data-text":e.text,points:e.polygonsText,className:e.checked?"".concat(g().py," ").concat(g()["py-checked"]):g().py,onClick:()=>se(e)},e.id)))})]})})]})]})}));t["default"]=(0,u.f3)("global","intls","lcStore")((0,p.ZP)(w))},95909:function(e,t,o){var n=o(94043),c=o(4766);e.exports=function(){var e=c(n.mark((function e(t){var o,c,r,a,s,i,l;return n.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.accessKey,c=void 0===o?"c3b7bcef448ca566f4f7313799405925":o,r=t.secretKey,a=void 0===r?"6709d94e05dfd716fb311ba98b64c01c":r,s=t.fileData,i=new Headers,i.append("x-ti-app-id",c),i.append("x-ti-secret-code",a),i.append("Content-Type","application/octet-stream"),i.append("Cookie","acw_tc=781bad2416460268990603813e10610a6954922acc26b4385c2bc42b13a48c"),l={method:"POST",headers:i,body:s,redirect:"follow"},e.abrupt("return",new Promise(((e,t)=>{fetch("https://api.textin.com/robot/v1.0/api/text_recognize_3d1?format_whole_text=1",l).then((e=>e.text())).then((o=>{var n=JSON.parse(o);console.log("fetch ocr data == ",n),200===(null===n||void 0===n?void 0:n.code)?e(n):(alert(n.code+":"+n.message),console.error("fetch ocr error == ",n),t(n)),e(n)})).catch((e=>{console.log("error",e),t(e)}))})));case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}]);